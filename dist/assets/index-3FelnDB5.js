var l=Object.defineProperty;var u=(o,t,e)=>t in o?l(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var s=(o,t,e)=>u(o,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();const a={ArrowUp:"up",ArrowDown:"down",ArrowLeft:"left",ArrowRight:"right"};class f{constructor(){s(this,"_direction",null);s(this,"held",[]);s(this,"onKeyDown",t=>{const e=a[t.key];e&&(t.preventDefault(),this.held.includes(e)||this.held.push(e),this._direction=e)});s(this,"onKeyUp",t=>{const e=a[t.key];if(!e)return;const n=this.held.indexOf(e);n!==-1&&this.held.splice(n,1),this._direction===e&&(this._direction=this.held[this.held.length-1]??null)});window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)}get direction(){return this._direction}destroy(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}}const p=120,h=10,m={right:[.25*Math.PI,1.75*Math.PI],down:[.75*Math.PI,.25*Math.PI],left:[1.25*Math.PI,.75*Math.PI],up:[1.75*Math.PI,1.25*Math.PI]};class y{constructor(t){s(this,"ctx");s(this,"lastTime",0);s(this,"rafId",0);s(this,"input");s(this,"x");s(this,"y");s(this,"facing","right");this.canvas=t;const e=t.getContext("2d");if(!e)throw new Error("Could not get 2D canvas context");this.ctx=e,t.width=560,t.height=620,this.x=t.width/2,this.y=t.height/2,this.input=new f}start(){this.rafId=requestAnimationFrame(t=>this.loop(t))}stop(){cancelAnimationFrame(this.rafId),this.input.destroy()}loop(t){const e=Math.min((t-this.lastTime)/1e3,.1);this.lastTime=t,this.update(e),this.render(),this.rafId=requestAnimationFrame(n=>this.loop(n))}update(t){const e=this.input.direction;e!==null&&(this.facing=e);const n=p*t;switch(e){case"up":this.y-=n;break;case"down":this.y+=n;break;case"left":this.x-=n;break;case"right":this.x+=n;break}this.x=Math.max(h,Math.min(this.canvas.width-h,this.x)),this.y=Math.max(h,Math.min(this.canvas.height-h,this.y))}render(){const{ctx:t,canvas:e}=this;t.fillStyle="#000",t.fillRect(0,0,e.width,e.height);const[n,i]=m[this.facing];t.fillStyle="#FFD700",t.beginPath(),t.moveTo(this.x,this.y),t.arc(this.x,this.y,h,n,i),t.closePath(),t.fill()}}const d=document.getElementById("game");if(!(d instanceof HTMLCanvasElement))throw new Error("Could not find #game canvas element");const w=new y(d);w.start();
